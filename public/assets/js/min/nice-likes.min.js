/**
 * Nice Likes by NiceThemes
 *
 * @package Nice_Likes
 * @license GPL-2.0+
 */
var NiceLikes=function($){"use strict";var i=!1,e=function(){$(document.body).on("click",".nice-likes",function(i){i.preventDefault();var e=$('.nice-likes[data-id="'+$(this).data("id")+'"]'),t={};e.each(function(){t[$(this).data("query")]={post_id:$(this).data("id"),show_postfix:$(this).data("postfix"),icon:$(this).find("i:first").prop("outerHTML")}});var n={action:"nice_likes_update",update_likes:!0,posts:t,post_id:$(this).data("id"),query_id:$(this).data("query"),show_postfix:$(this).data("postfix"),nonce:window.nice_likes_vars.nonce,fromurl:window.nice_likes_vars.fromurl,singular:window.nice_likes_vars.singular};e.each(function(){$(this).addClass("updating"),$(this).hasClass("liked")?$(this).addClass("disliking"):$(this).addClass("liking")}),$.post(window.nice_likes_vars.ajaxurl,n,function(i){try{i=JSON.parse(i)}catch(e){return window.console.log("Well-formatted Likes data could not be processed. The following data was received instead:"),void window.console.log(i)}for(var e=0;e<i.length;e++){var t=$("[data-query="+i[e].query_id+"]");t.replaceWith(i[e].content)}})})},t=function(){$(document.body).on("click",".nice-likes-unlike",function(i){i.preventDefault();var e=$('.nice-likes[data-id="'+$(this).data("id")+'"]'),t=$('.nice-likes-unlike[data-id="'+$(this).data("id")+'"]'),n={};e.each(function(){n[$(this).data("query")]={post_id:$(this).data("id"),show_postfix:$(this).data("postfix"),icon:$(this).find("i:first").prop("outerHTML")}});var a={action:"nice_likes_update",update_likes:!0,posts:n,post_id:$(this).data("id"),query_id:$(this).data("query"),nonce:window.nice_likes_vars.nonce,show_postfix:$(this).data("postfix")};e.each(function(){$(this).addClass("updating")}),t.each(function(){$(this).addClass("updating")}),$.post(window.nice_likes_vars.ajaxurl,a,function(i){try{i=JSON.parse(i)}catch(e){return window.console.log("Well-formatted Likes data could not be processed. The following data was received instead:"),void window.console.log(i)}for(var e=0;e<i.length;e++){var n=$(".nice-likes[data-query="+i[e].query_id+"]");n.replaceWith(i[e].content)}t.each(function(){$(this).remove()})})})},n=function(){$(document).ready(function(){var i=$(".nice-likes"),e={};i.each(function(){e[$(this).data("query")]={post_id:$(this).data("id"),show_postfix:$(this).data("postfix"),icon:$(this).find("i:first").prop("outerHTML")}});var t={action:"nice_likes_load",posts:e,nonce:window.nice_likes_vars.nonce,fromurl:window.nice_likes_vars.fromurl,singular:window.nice_likes_vars.singular};$.post(window.nice_likes_vars.ajaxurl,t,function(i){try{i=JSON.parse(i)}catch(e){return window.console.log("Well-formatted Likes data could not be processed. The following data was received instead:"),void window.console.log(i)}for(var e=0;e<i.length;e++){var t=$("[data-query="+i[e].query_id+"]");t.replaceWith(i[e].content)}})})},a=function(){return i||(e(),t(),i=!0,$(document).trigger("NiceLikesLoaded")),n(),!0},o=function(){var i=new MutationObserver(function(i){i.forEach(function(){n||(n=!0,setTimeout(function(){s(),n=!1},1e3))})}),e={childList:!0,subtree:!0},t=document.body,n=!1;return i.observe(t,e),!0},s=function(){$(".nice-likes.waiting").length&&a()},d=function(){i||($(document).on("NiceLikesLoaded",o),a())};return{ready:d,reset:s}}(jQuery);jQuery(NiceLikes.ready);